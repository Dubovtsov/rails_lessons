~~Разработайте функционал который позволит пользователям получать бэйджи (награды) за успешное прохождение тестов.~~

~~Бэйджи представляются моделью Badge~~
Пользователь может получать один и тот же бэйдж более одного раза
~~Бэйдж обязательно содержит атрибуты:
    Название
    Имя файла с изображением (Делать загрузку изображений не нужно. Это может быть статический файл с изображением который вручную добавляется в проект. Либо это может быть любой URL с изображением бэйджа)~~
~~Выдача бэйджов происходит автоматически после завершения теста~~
~~Управление бэйджами осуществляется администратором~~
~~При создании бэйджа администратор также назначает правило которое определяет порядок выдачи бэйджа. Примеры правил:
    Выдать бэйдж после успешного прохождения всех тестов из категории Backend
    Выдать бэйдж после успешного прохождения теста с первой попытки
    Выдать бэйдж после успешного прохождения всех тестов определённого уровня~~
Допускается что критерии правил заданы заранее, например на уровне атрибутов модели
~~Пользователь в любой момент времени может посмотреть список всех существующих и заработанных бэйджей~~

правила можно захардкодить, не обязательно делать их динамическими.
прямо в бейджи.
задача сервиса пройти по существующим бейджам и раздать их пользователям.
метод пробега по бейджам как-то так
Badges.all.each do |badge|
  user.badges << badge if send("#{badge.rule}_award?}", badge)
end
соответсвенно у тебя будет 3(или сколько у тебя будет различных бейджей) метода для их обработки
def all_level_award?(badge)
и тд
Ivan Dubovtsov 1:08 PM
У меня такой вопрос
У меня есть бэйдж "пройдите все тесты в категории" , у меня не получается выбрать test_passages , или обработать test_passages чтобы посчитать сколько их выполнено, так чтобы не считать дубликаты, так как юзер мог пройти тест успешно,  несколько раз

выбираешь все тесты, которые проходил пользователь,  выбираешь только уникальные и сравниваешь этот набор id  с набором тестов среди нужной категории


ты можешь еще добавить флаг успешности прохождения тестов в таблицу промежуточную
и условно у тебя будет примерно так test_passage.user.tests.success.ids.uniq == Test.by_category(category_name).ids
Ivan Dubovtsov 2:29 PM
Спасибо, вечером попробую сделать
